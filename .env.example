# North Cloud Environment Variables
# Copy this file to .env and update with your values

# ============================================
# Global Configuration
# ============================================
APP_DEBUG=true
APP_ENV=development

# Docker User Configuration (Development)
# Set these to match your host user to avoid permission issues
# On Linux/Mac, run: id -u && id -g to get your UID and GID
UID=1000
GID=1000

# ============================================
# Infrastructure Services
# ============================================

# Elasticsearch
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SECURITY_ENABLED=false
ELASTICSEARCH_URL=http://localhost:9200

# Redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Nginx
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ============================================
# Source Manager Service
# ============================================
SOURCE_MANAGER_PORT=8050
SOURCE_MANAGER_HOST=0.0.0.0
SOURCE_MANAGER_API_URL=http://localhost:8050
FRONTEND_PORT=3000

# Source Manager Database
POSTGRES_SOURCE_MANAGER_HOST=localhost
POSTGRES_SOURCE_MANAGER_PORT=5432
POSTGRES_SOURCE_MANAGER_USER=postgres
POSTGRES_SOURCE_MANAGER_PASSWORD=changeme
POSTGRES_SOURCE_MANAGER_DB=gosources
POSTGRES_SOURCE_MANAGER_SSLMODE=disable

# ============================================
# Crawler Service
# ============================================
CRAWLER_PORT=8060
CRAWLER_HOST=0.0.0.0
CRAWLER_SOURCES_API_URL=http://source-manager:8050/api/v1/sources

# Crawler Database
POSTGRES_CRAWLER_HOST=localhost
POSTGRES_CRAWLER_PORT=5433
POSTGRES_CRAWLER_USER=postgres
POSTGRES_CRAWLER_PASSWORD=changeme
POSTGRES_CRAWLER_DB=gocrawl
POSTGRES_CRAWLER_SSLMODE=disable

# ============================================
# Index Manager Service
# ============================================
POSTGRES_INDEX_MANAGER_HOST=localhost
POSTGRES_INDEX_MANAGER_PORT=5436
POSTGRES_INDEX_MANAGER_USER=postgres
POSTGRES_INDEX_MANAGER_PASSWORD=yourpassword
POSTGRES_INDEX_MANAGER_DB=index_manager

# ============================================
# Classifier Service
# ============================================
CLASSIFIER_PORT=8071
CLASSIFIER_HOST=0.0.0.0
CLASSIFIER_ENABLED=true
CLASSIFIER_CONCURRENCY=10
CLASSIFIER_BATCH_SIZE=100
CLASSIFIER_MIN_QUALITY_SCORE=50
CLASSIFIER_POLLING_INTERVAL=30s

# Classifier Database
POSTGRES_CLASSIFIER_HOST=localhost
POSTGRES_CLASSIFIER_PORT=5435
POSTGRES_CLASSIFIER_USER=postgres
POSTGRES_CLASSIFIER_PASSWORD=changeme
POSTGRES_CLASSIFIER_DB=classifier
POSTGRES_CLASSIFIER_SSLMODE=disable

# ============================================
# Search Service
# ============================================
SEARCH_PORT=8092
SEARCH_DEBUG=true
SEARCH_MAX_PAGE_SIZE=100
SEARCH_DEFAULT_PAGE_SIZE=20
SEARCH_LOG_LEVEL=info
SEARCH_LOG_FORMAT=json

# ============================================
# Auth Service
# ============================================
AUTH_SERVICE_PORT=8040
AUTH_SERVICE_HOST=0.0.0.0

# Auth Database
POSTGRES_AUTH_HOST=localhost
POSTGRES_AUTH_PORT=5432
POSTGRES_AUTH_USER=postgres
POSTGRES_AUTH_PASSWORD=changeme
POSTGRES_AUTH_DB=auth
POSTGRES_AUTH_SSLMODE=disable

# JWT Configuration
AUTH_JWT_SECRET=CpgfEP9nKSzLJTzfSJKW8ynwsOXrlQJ1h8ZQRbYSBJ4=
AUTH_JWT_EXPIRY=24h
AUTH_JWT_REFRESH_EXPIRY=168h

# Initial Admin User (for seed command)
AUTH_ADMIN_PASSWORD=changeme

# ============================================
# Publisher Service
# ============================================
PUBLISHER_PORT=8070

# Publisher Database
POSTGRES_PUBLISHER_HOST=localhost
POSTGRES_PUBLISHER_PORT=5437
POSTGRES_PUBLISHER_USER=postgres
POSTGRES_PUBLISHER_PASSWORD=changeme
POSTGRES_PUBLISHER_DB=publisher
POSTGRES_PUBLISHER_SSLMODE=disable

# Router Service Configuration
PUBLISHER_ROUTER_CHECK_INTERVAL=5m
PUBLISHER_ROUTER_BATCH_SIZE=100

# ============================================
# MinIO Object Storage (HTML Archiving)
# ============================================
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=changeme123
HTML_RETENTION_DAYS=90

# Crawler MinIO Integration
CRAWLER_MINIO_ENABLED=true
CRAWLER_MINIO_ENDPOINT=minio:9000
CRAWLER_MINIO_ACCESS_KEY=minioadmin
CRAWLER_MINIO_SECRET_KEY=changeme123
CRAWLER_MINIO_BUCKET=html-archives
CRAWLER_MINIO_METADATA_BUCKET=crawler-metadata
CRAWLER_MINIO_USE_SSL=false

# ============================================
# Docker BuildKit Configuration
# ============================================
# Limit BuildKit parallelism to prevent RAM exhaustion during builds
# Set to 1 to build one service at a time (safest, uses less RAM)
# Set to 2-3 to build multiple services in parallel (faster, uses more RAM)
# Uncomment and set if experiencing high RAM usage during docker compose build
# BUILDKIT_MAX_PARALLELISM=1

# Alternative: Disable BuildKit entirely (uses legacy builder)
# DOCKER_BUILDKIT=0
